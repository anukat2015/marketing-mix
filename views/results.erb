<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" >
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Marketing Mix Tool | Dozen Digital</title>

		<link rel="stylesheet" type="text/css" href="style.css">
		<link rel="stylesheet" type="text/css" href="normalize.css">
		<link rel="stylesheet" type="text/css" href="foundation.min.css">
		<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
		<link href="c3/c3.css" rel="stylesheet" type="text/css">
		<script src="js/vendor/modernizr.js"></script>


	</head>

	<body>
		<div class="fixed">
			<nav class="top-bar" data-topbar role="navigation">
				<ul class="title-area">
					<li class="name">
						<h1><a href="/">What's My Marketing Mix?</a></h1>
					</li>
				</ul>
				<ul class="right">
					<li class="name">
						<a href="http://www.dozendigital.com"><img src="dozen-logo.png"></a>
					</li>
				</ul>
			</nav>
		</div>
		<div class="container results">
			<div class="row text-center">
				<div class="large-2 columns">&nbsp;</div>
				<div class="large-8 columns">Here's Your Marketing Mix.</div>
				<div class="large-2 columns">&nbsp;</div>
			</div>
			<div class="row text-center">
				<div class="large-12 columns">
					<div id="score_chart"></div>
					<div class="panel" id="results-explanation">Based on what we know about your business, here's how we think you should split your resources across the various digital marketing channels. To learn more about each channel and how it relates to your business, hover over its slice in the pie chart.</div>
				</div>
			</div>
			<div class="row text-center">
				<div class="large-3 columns">&nbsp;</div>
				<div class="large-6 columns">
					<a href="/pdf" class="button" target="_blank">Generate PDF</a>
					<p>
						<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://dozendigital.com/mix" data-text="I just calculated my digital marketing mix! Get yours here:">Tweet</a>
						<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
						</script>
					</p>
				</div>
				<div class="large-3 columns">&nbsp;</div>
			</div>
		</div>

		<script src="js/vendor/jquery.js"></script>
		<script src="/js/vendor/fastclick.js"></script>
		<script src="js/foundation.min.js"></script>
		<script src="js/foundation/foundation.slider.js"></script>

		<!-- Load d3 -->
		<script src="js/d3.v3.min.js" charset="utf-8"></script>

		<!-- Load c3.js -->
		<script src="c3/c3.min.js"></script>

		<!-- Generate pie chart -->
		<script type="text/javascript">

			function channelExplanation(channel) {
				switch (channel) {
					case "Mobile App Install Advertising":
						return "Mobile App Install Marketing is";
					case "Email Marketing":
						return "Email Marketing is";
					case "Search Advertising":
						return "Search Advertising is";
					case "Facebook Advertising":
						return "Facebook Advertising is";
					case "Local Advertising":
						return "Local Advertising";
					case "Retargeting":
						return "Retargeting is";
					case "Content Marketing":
						return "Content Marketing";
					case "Social Media and Community":
						return "Social Media and Community";
					case "Partnerships and Business Development":
						return "Partnerships and Business Development";
					case "Referral Marketing":
						return "Referral Marketing";
					case "Twitter Advertising":
						return "Twitter Advertising";
					case "Display/Banner Advertising":
						return "Display/Banner Advertising";
					case "Direct Sales":
						return "Direct Sales";
					case "PR":
						return "PR";
					default:
						return "Based on what we know about your business, here's how we think you should split your resources across the various digital marketing channels. To learn more about each channel and how it relates to your business, hover over its slice in the pie chart.";
				}
			}

			function replaceText(d) {
				$("div#results-explanation").text(
					channelExplanation(d.id)
				);
			}

			function defaultText() {
				$("div#results-explanation").text("Based on what we know about your business, here's how we think you should split your resources across the various digital marketing channels. To learn more about each channel and how it relates to your business, hover over its slice in the pie chart.");
			}

			var chart = c3.generate({
				bindto: "#score_chart",
			    data: {
			        columns: [
			        	<% results.each do | k, v | %>
			        		<% if v[:sum] != 0 %>
			        			[ "<%= v[:name] %>", <%= v[:sum] %> ],
			        		<% end %>
			        	<% end %>
			        ],
			        type : 'pie',
			        onclick: function (d, i) { console.log("onclick", d, i); },
			        onmouseover: function (d, i) {
			        	console.log("onmouseover", d, i);
			        	replaceText(d);
			        },
			        onmouseout: function (d, i) {
			        	console.log("onmouseout", d, i);
			        	defaultText();
			        }
			    },
			    transition: {
		        	duration: 0
		        },
		        legend: {
		        	position: 'right'
		        },
		        pie: {
				  label: {
				    show: false
				  }
				}
			});

			setTimeout(function () {
			    chart.unload({
			        ids: 'data1'
			    });
			    chart.unload({
			        ids: 'data2'
			    });
			}, 2500);

		</script>

		<script>
			$(document).foundation();
		</script>
	</body>

</html>